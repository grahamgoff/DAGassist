---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, comment = NA,
  fig.path = "man/figures/README-", out.width = "100%"
)

devtools::load_all(quiet = TRUE)

library(fixest)
```

# DAGassist

<!-- badges: start -->
[![R-CMD-check](https://github.com/grahamgoff/DAGassist/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/grahamgoff/DAGassist/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

**An all-in-one DAG-driven robustness check.**
Classifies variables by causal role, computes the smallest back-door adjustment set, and compares the significance of the original and minimal models.


## Installation

You can install the development version of DAGassist from [GitHub](https://github.com/) with:

``` {r install, eval = FALSE}
install.packages("pak")
pak::pak("grahamgoff/DAGassist")

#load the library
library(DAGassist) 
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r run}
dag_assist(dag=test_complex, formula = feols(Y ~ X + Z + B + A + C + M | region + time, data = test_df))
```

## How to get the most out of **DAGassist**

### See each variable's causal role:

```{r}
classify_nodes(test_complex, exposure = "X", outcome = "Y")
```

### Quickly flag bad controls:

```{r}
bad_controls_in(dag = test_complex, 
                controls = c("Z", "M", "C"), 
                exposure = "X",
                outcome = "Y")
```

## Roadmap to v2.0:

- [x] Add acyclicity checks to validate.R
- [x] Clarify the validation output
- [x] Add neat tables to the console output
- [x] Include Canonical adjustment sets
- [ ] Ensure that classify.R categories are **always** accurate
- [ ] Handling multiple minimal adjustment sets
- [ ] Engine compatibility with all major engines
- [ ] Handle diff-in-diff and fixed effects formula notation
- [ ] Add graphics: gray scale of the original model, with the minimal set visibly          differentiated.
- [ ] Add more colors in output
- [ ] Add options for LaTeX and Kable output
- [ ] Add export_report functionality, which will print a publication-grade 2-page robustness check with a single, simple call (for robustness check use)
- [ ] Add a simple "covariate sensitivity" line to report, indicating if (i) the original model is statistically significant; (ii) the minimal or canonical set is statistically insignificant
